# -*- coding:UTF-8 -*-
# auther:drliu
# date:2022/5/5
# aim: 词云生成
import wordcloud
import jieba  # 结巴分词2
from wordcloud import WordCloud  # 词云展示库
from PIL import Image  # 图像处理库
import numpy as np  # 支持多维数组和矩阵运算
import matplotlib.pyplot as plt  # 图像展示库
import re
import sys


def main():
    # 读取文本内容
    with open('result.txt', 'r', encoding="UTF-8") as f:
        file = f.read()  # 将文本读取为整个字符串，readlines可以按行读取

    # 进行分词
    data_cut = jieba.cut(file, cut_all=False)  # 精确模式分词

    stop_words = ["，", "。", ";", "、", "我们", "你们", "发送", "INFO", "Pictu", "月", "日",
                  'S', "Picti", '', "我", "的", "年"]  # 自定义停词列表

    stop_words_01 = ['1527296082224650617', '1527296202592173925', '964', '223341', '5', '427', '00', '149', '002', '615', '556', '726', '1527296249662434300', '15272962792129785642022', '405', '1527296265128498594', '15272961930798544352022', '1935', '15272961120053651602022', '1527296127856672514', '15272963318672765462022', '1113', '223243', '538', '10', '15272963413649508692022', '320', '50', '15272962196634722642022', '15272964023897415422022', '1527296058661973551', '1539', '223300', '223225', '815', '15272961321515943282022', '15272962969699914212022', '223251', '223334', '223232', '15272963079788347772022', '2126', '1527296195495411025', '2208', '1527296163796770001', '334', '15272963366684865022022', '1527296380139820733', '1527296432263416490', '15272961954954110252022', '15272962157717315722022', '1527296143671784103', '465', '1400', '332', '15272962393873722592022', '15272960865098352152022', '480', '223311', '110', '406', '15272962513408784442022', '223320', '1623', '1527296069869661498', '15272962695837466252022', '759', '1527296348514793118', '1527296067110803681', '15272961637967700012022', '223318', '15272964476598726512022', '15272962240769391472022', '15272964166937763292022', '388', '15272961599388303062022', '223306', '15272963298388235562022', '15272963209986893992022', '950', '223226', '8625', '1527296108531948734', '1513', '1527296344754535668', '125', '2022', '19', '000', '15272963517367081202022', '1509', '496', '15272962444848351652022', '2328', '3', '1527296224076939147', '1527296243218302320', '749', '1527296226643374161', '1302', '736', '15272962887872134392022', '1527296439777854863', '15189808433', '1942', '2138107', '0', '645', '254', '1527296181528883784', '223326', '15272962727317948912022', '378', '986', '650', '689', '15272963703598101742022', '1527296254561482549', '1527296222346872876', '1406', '2011', '15272964429678838822022', '1527296116711682910', '1527296323076617657', '1527296402389741542', '23', '1210', '15272960627635478912022', '1527296154767337991', '15272961723679073142022', '1527296331867276546', '2001', '15272963984431570722022', '111', '1527296447731980979', '15272964112923948922022', '260', '1602', '1527296318780120683', '15272962759999880762022', '1527296120945538585', '1023', '1527296304457370450', '2258', '257', '521', '315', '1527296275999988076', '0030', '1527296176606170023', '69666', '223324', '1839', '560', '1731', '1527296191998684362', '24', '018', '223344', '223255', '15272963693795987152022', '234', '15272962352215895112022', '1527296182599632200', '1527296099328664127', '15272962478138369472022', '016', '1527296400135530773', '15272960671108036812022', '15272961879552288612022', '223254', '1527296064440983815', '070', '1411', '1527296307978834777', '146', '1527296314651206812', '15272960932154111452022', '223314', '1527296230838224510', '20', '15272962931277076712022', '2142', '42', '1226', '2', '15272964477319809792022', '129', '205', '1527296213751533090', '1212', '028', '1527296151281472162', '223333', '15272961766061700232022', '1308', '232', '535', '15272963721362358102022', '722', '10', '2', '655', '1527296232939536481', '826', '410', '15272963640827343912022', '1527296284621661528', '15272963123568259282022', '1527296175010141506', '15272963168374850712022', '241', '15272961436717841032022', '1527296159938830306', '423', '1527296133217717189', '1527296209263888353', '223247', '223237', '1832', '424', '775', '223211', '07', '811', '223338', '136', '1527296168620895418', '730', '1', '1527296102023639789', '2019', '464', '1527296235221589511', '425', '908', '17', '1527296087058081391', '515', '1527296112005365160', '15272961428930001102022', '577', '2152', '15272961255776760302022', '15272962545614825492022', '734', '15272962329395364812022', '892', '15272963584305908602022', '15272963102621733262022', '932', '15272962651284985942022', '1527296199656524933', '223312', '15272963485147931182022', '1527296108395798778', '971', '2004', '15272963146512068122022', '223252', '15272961177830907542022', '1121', '1527296178256560728', '223322', '1527296260968510286', '836', '1342', '15272962631196233222022', '1527296225970967827', '8', '1527296441348765880', '1527296219663472264', '1527296422935260847', '846', '1025', '2301', '1527296136648944541', '15272962496624343002022', '1527296360175296932', '1527296383360657603', '022', '15272961203088207562022', '3', '223250', '223213', '1527296293127707671', '223248', '952', '744', '10', '1527296329838823556', '223309', '15272961750017188182022', '416', '223219', '223227', '1527296054839527981', '15272960836698550192022', '223245', '631', '223239', '735', '471', '1257', '1527296132151594328', '223223', '15272962092638883532022', '2141', '163', '1304', '366', '2029', '15272962378937820272022', '15272963187801206832022', '1148', '1527296428373601361', '409', '15272963044573704502022', '1527296086509835215', '1527296425555111799', '1527296256155988265', '15272961919986843622022', '1527296357367335233', '1527296320998689399', '15272960806152005142022', '15272960751069035812022', '15272961686208954182022', '14', '116', '223214', '223249', '637', '898', '1527296310262173326', '091', '15272963447545356682022', '692', '1527296251340878444', '1527296303815149989', '621', '15272964397778548632022', '1527296344207706577', '1527296325395428151', '445', '086', '500', '1757', '223217', '15272960698696614982022', '261', '25', '15272960891218437002022', '15272961278566725142022', '765', '223212', '1527296411292394892', '825', '15272961847620946272022', '1835', '15272961083957987782022', '029', '15272962952880416302022', '1919', '349', '223303', '1527296398443157072', '15272963783746441142022', '15272962432183023202022', '15272964067621077082022', '1527296166510966148', '762', '017', '15272963552079671102022', '335', '1527296432631745084', '1527296442967883882', '15272962705962828032022', '15272962866372271652022', '1527296421690472449', '1830', '1527296354049140145', '1527296299651363932', '2241', '940', '15272961702397924242022', '223339', '223242', '1527296416693776329', '15272961782565607282022', '15272960870580813912022', '065', '1527296266835850828', '044', '652', '1527296215771731572', '407', '223257', '223307', '1527296326962455232', '895', '15272962775610410142022', '1527296279212978564', '1527296412910472150', '223337', '519', '1527296263119623322', '2217', '15272963746866704232022', '031', '15272962472851977662022', '253', '303', '2052', '1850', '15272964129104721502022', '625', '1527296239387372259', '15272961665109661482022', '580', '15272962898055134362022', '1527296162204368398', '350', '223240', '1527296198153611473', '487', '223321', '15272961224733077612022', '223258', '751', '1527296444379155333', '1527296215769828602', '920', '1527296149297119942', '62011', '223304', '1335', '654', '223332', '15272960644409838152022', '15272963540491401452022', '1527296205133926853', '15272962824339987532022', '2304', '1527296138598561192', '1103', '946', '1527296148191979489', '1527296407831097707', '15272960676973272292022', '1527296117783090754', '2326', '1040', '2233', '15272962581146149522022', '1527296308248324035', '1527296095218388697', '165', '15272962929199458962022', '014', '15272963757069081262022', '15272964388741321882022', '1231', '1135', '223224', '034', '119', '15272962259709678272022', '1426', '1527296125711735709', '15272961571196901032022', '1527296175001718818', '15272961385985611922022', '15272963683790244332022', '1527296247285197766', '1527296164265876839', '643', '15272961965690462172022', '1527296067697327229', '610', '15272960779283226952022', '223228', '1527296062763547891', '117', '1527296228375357264', '1404', '499', '1838', '27', '9', '223246', '699', '1527296157119690103', '813', '1527296292919945896', '844', '1527296295288041630', '877', '526', '1527296438874132188', '011', '155', '1527296184762094627', '223343', '1527296217987857256', '272226', '1527296110653781697', '1323', '2138', '15272961547673379912022', '782', '1527296378374644114', '1127', '15272963211332300702022', '1527296093215411145', '80', '984', '1527296366217086999', '446', '1527296210436187608', '1545', '15272961167116829102022', '851', '2059', '183116', '26', '223253', '15272961144973876012022', '223238', '223234', '223335', '15272962609685102862022', '641', '662', '15272962104361876082022', '884', '076', '01120', '15272961332177171892022', '871', '437', '049', '223302', '1527296406762107708', '901', '15272963833606576032022', '2200', '15272964229352608472022', '1527296275500226931', '1952', '28', '1058', '1527296097243450005', '15272961492971199422022', '2047', '1527296277561041014', '15272964299960139532022', '709', '223229', '15272963008568404612022', '223220', '15272960548395279812022', '15272963801398207332022', '189', '2305', '134', '15272963662170869992022', '223308', '1527296078355108772', '11', '013', '223310', '15272962025921739252022', '497', '365', '527', '348', '223316', '15272960586619735512022', '300', '15272962846216615282022', '1527296296969991421', '1527296125577676030', '2251', '223235', '12', '15272963468723108302022', '15272963135648461032022', '773', '6', '1527296364082734391', '2352', '1527296142893000110', '742', '1527296122473307761', '510', '743', '15272961020236397892022', '1527296129956899304', '15272962137515330902022', '1821', '15851809634', '140', '382', '2118', '11', '623', '15272964001355307732022', '1045', '2331', '1527296300856840461', '2154', '15272964198988739972022', '15272962051339268532022', '1527296374686670423', '5', '611', '161', '0000', '15272962561559882652022', '12011022', '15272963442077065772022', '223222', '033', '2327', '15272962223468728762022', '763', '2219', '66001', '544', '166', '223218', '249', '15272961366489445412022', '1527296375706908126', '609', '1527296056774031939', '279', '001', '2120', '15272964110575797452022', '15272963334826294072022', '777', '15272960952183886972022', '1527296244484835165', '2218', '8', '173', '985', '15272961209455385852022', '15272964349408458612022', '15272964498456918052022', '639', '941', '15272964367616312342022', '554', '15272961512814721622022', '1705', '005', '1527296269583746625', '2213', '15272961815288837842022', '2347', '15272963082483240352022', '15272962413740721782022', '15272964283736013612022', '1039', '15272961463831416302022', '113', '1527296114497387601', '15272962157698286022022', '15272962668358508282022', '1750', '1527296270596282803', '15272962308382245102022', '452', '1527296419898873997', '1527296153572717996', '15272963230766176572022', '1527296120308820756', '2139', '7', '1527296237893782027', '15272964078310977072022', '483', '223216', '15272961358941877382022', '1527296247813836947', '581', '15272962362914674722022', '151', '555', '009', '058', '15272964154729626202022', '1527296449845691805', '2150', '18', '15272961874318867042022', '1915', '2226', '1527296341364950869', '238', '152', '15272960783551087722022', '1527296333482629407', '1527296282433998753', '570', '1527296289805513436', '21', '859', '248', '15272960993286641272022', '223233', '1527296187955228861', '15272963253954281512022', '921', '781', '203', '1527296254544152112', '223342', '142', '2146', '1527296312356825928', '252', '2337', '223230', '1527296187431886704', '15272961622043683982022', '339', '05', '612', '2247', '2346', '148', '15272963601752969322022', '1527296369379598715', '15272964413487658802022', '1019', '15272960972434500052022', '1242', '223323', '467', '1527296089121843700', '184', '779', '887', '1140', '1559', '223259', '223215', '2332', '13', '1527296429996013953', '1527296258114614952', '15272961031584293432022', '223340', '2015', '314', '16', '1527296288787213439', '433', '1527296146383141630', '1409', '659', '048', '421', '1527296272731794891', '1527296346872310830', '208', '1527296083669855019', '2253', '970', '1527296336668486502', '223301', '1309', '15272961299568993042022', '854', '1043', '1527296434940845861', '1519', '1527296140240023424', '1527296358430590860', '1527296447659872651', '15272961981536114732022', '374', '934', '713', '223231', '1527296241374072178', '168', '381', '223210', '060', '2354', '15272961825996322002022', '15272961996565249332022', '1610', '822', '223315', '223221', '607', '1527296316837485071', '1527296372136235810', '1527296091330143307', '075', '1527296103158429343', '15272963501223014462022', '511', '15272961481919794892022', '15272964322634164902022', '386', '15272964443791553332022', '4', '1413', '1527296172367907314', '1527296080615200514', '463', '19941103', '15272963269624552322022', '199', '15272964326317450842022', '1527296370359810174', '15272964255551117992022', '367', '223325', '223328', '223336', '1527296350122301446', '812', '770', '15272962755002269312022', '220', '1012', '1527296236291467472', '15272962545441521122022', '223256', '853', '15272962283753572642022', '15272962819379600612022', '322', '1437', '849', '15272960822246506172022', '1527296411057579745', '1527296193079854435', '626', '1320', '852', '40', '3', '15272963573673352332022', '766', '1527296313564846103', '1527296170239792424', '223241', '15272961052093714222022', '1527296361909338097', '935', '222', '202', '15272962996513639322022', '15272960913301433072022', '15272961106537816972022', '796', '454', '1527296105209371422', '2221', '916', '2021', '1527296281937960061', '223327', '121', '223305', '170', '15272961535727179962022', '15272962266433741612022', '15272963619093380972022', '223236', '1527296077928322695', '15272963358982014702022', '223244', '1527296436761631234', '417', '223319', '588', '1352', '156', '012', '2203', '870', '1527296321133230070', '1753', '19941103', '1809', '1527296351736708120', '214', '1527296196569046217', '1527296135894187738', '1831', '200', '15272963038151499892022', '15272964216904724492022', '293', '2228', '1527296335898201470', '2252', '159', '223313', '1527296263598521726', '020', '15272961642658768392022', '15272961085319487342022', '1527296286637227165', '15272960567740319392022', '15272962179878572562022', '1527296415472962620', '707', '361', '15272961750101415062022', '1527296075106903581', '1954', '15272962635985217262022', '4', '15272961257117357092022', '15272961402400234242022', '008', '114', '088', '1527296368379024433', '1527296355207967110']
    stop_words_02 = ['10', '01120', '3', '11', '4', '183116', '1121', '3', '8', '19941103', '2', '10', '5', '19941103']
    stop_words_03 = ['我', 'Pict', '图片', "惊鸿", '糖', "鱼", '和', "吃糖" , "不会", '同步', "最近",
                      "你", '老婆', "语音",  "不会", '了', "吧" , "爱", '啊', "在", "这个", '就', "没有"
                     , "吗" , "她", '那', "去", "要", '就', "还是", "是", "还", "https"]
    stop_words = stop_words_01 + stop_words + stop_words_02 + stop_words_03
    # stop_words = []
    # # 创建空列表
    # with open("stopwords.txt", 'r', encoding='utf-8') as f:
    #     for line in f:
    #         if len(line) > 0:
    #             stop_words.append(line.strip())  # 把停词追加到stop_words列表中
    #
    # 获取需要的词
    data_result = [i for i in data_cut if i not in stop_words]

    # dedupe_result = list(set(data_result))
    # match_number_while_length_10(dedupe_result)

    # 连接成字符串2print(text)
    text = " ".join(data_result).replace("\n", "")

    # 创建背景图片
    back_groud = np.array(Image.open('520.1.jpeg'))

    # 设置字体，不指定就会出现乱码,这个字体文件需要下载
    wc = WordCloud(font_path="YanShiYouRanXiaoKai-2.ttf", background_color="white", mask=back_groud,
                   max_words=5000, scale=20, min_font_size=5, max_font_size=20)

    # 生成词云图
    wc.generate(text)
    # 保存词云图
    wc.to_file("IMJG.jpg")
    # 保存图片
    # 展示
    plt.imshow(wc)
    # 对图片进行处理，并显示其格式
    plt.axis("off")
    # 关闭坐标轴
    plt.show()
    # 将图片显示出来

    # 用Image方法打开图片
    # images = np.array(Image.open("JG.png"))
    # wc = WordCloud(font_path="演示悠然小楷.ttf", background_color="black", max_words=5000, mask=images)


def match_number_while_length_10(_list):
    _matched_result_list = []
    for _item in _list:
        m = re.findall("\d+", _item)
        if m:
            _matched_result_list.append(m[0])

    print(_matched_result_list)


if __name__ == '__main__':
    main()
